from helpers import timer
import copy
import functools as ft

lines = """Tile 2311:
..##.#..#.
##..#.....
#...##..#.
####.#...#
##.##.###.
##...#.###
.#.#.#..##
..#....#..
###...#.#.
..###..###

Tile 1951:
#.##...##.
#.####...#
.....#..##
#...######
.##.#....#
.###.#####
###.##.##.
.###....#.
..#.#..#.#
#...##.#..

Tile 1171:
####...##.
#..##.#..#
##.#..#.#.
.###.####.
..###.####
.##....##.
.#...####.
#.##.####.
####..#...
.....##...

Tile 1427:
###.##.#..
.#..#.##..
.#.##.#..#
#.#.#.##.#
....#...##
...##..##.
...#.#####
.#.####.#.
..#..###.#
..##.#..#.

Tile 1489:
##.#.#....
..##...#..
.##..##...
..#...#...
#####...#.
#..#.#.#.#
...#.#.#..
##.#...##.
..##.##.##
###.##.#..

Tile 2473:
#....####.
#..#.##...
#.##..#...
######.#.#
.#...#.#.#
.#########
.###.#..#.
########.#
##...##.#.
..###.#.#.

Tile 2971:
..#.#....#
#...###...
#.#.###...
##.##..#..
.#####..##
.#..####.#
#..#.#..#.
..####.###
..#.#.###.
...#.#.#.#

Tile 2729:
...#.#.#.#
####.#....
..#.#.....
....#..#.#
.##..##.#.
.#.####...
####.#.#..
##.####...
##..#.##..
#.##...##.

Tile 3079:
#.#.#####.
.#..######
..#.......
######....
####.#..#.
.#...#.##.
#.#####.##
..#.###...
..#.......
..#.###..."""
lines = """Tile 3301:
##..#...#.
.....#...#
#...#...##
#....#...#
#....#.#..
.#..#.#.##
.........#
##...#....
#...##...#
#..#..#.##

Tile 2861:
..#..#####
.....##...
......#..#
...###...#
#......#..
#.#.......
.........#
#.........
...#.#....
....#..##.

Tile 1459:
###.#.#...
#.........
#.........
#....#...#
#.........
#.....##..
#.....#...
.#.#...#.#
#.#.......
##.###..#.

Tile 2797:
....#####.
#..#......
#.......#.
#....#...#
....#...#.
#........#
......#..#
#...#....#
.....##...
##..##.###

Tile 2647:
###...###.
#......#..
...##.....
..#.....##
.###..#..#
#..#...#..
....##....
#..#.....#
..........
#..#....#.

Tile 1733:
.#...###.#
#.#..#....
.....#...#
....#.....
##..#.....
...#..#..#
...#.#.#..
#.........
#.......##
########..

Tile 2999:
...##.####
..#.......
#.....#...
##......#.
..#......#
##.....#..
#..##....#
......#...
.#..#.#...
.......#..

Tile 3067:
.#..#.....
.#....#..#
#.##....#.
....#....#
...#....#.
##........
#.......#.
..........
#........#
..#.#.#.##

Tile 3847:
######.#.#
......#..#
#..#.....#
#.#..#..#.
.#...###..
##....#..#
#..#......
......#...
..........
##.##...#.

Tile 1483:
.#........
....#....#
#.........
##..#....#
...#...##.
#..#......
...#......
#.....#...
#.........
##.#.#.#.#

Tile 1327:
######..#.
#...##....
##.#....#.
##..##....
##...#.#.#
#.#.#...##
#...#...#.
##...#....
#.#......#
.##.####..

Tile 2423:
###..#....
#...#..##.
.....#....
...#..#..#
....#....#
....##....
#..#..#.#.
.....#...#
.###..#..#
..##.###..

Tile 2689:
##.###..#.
##......##
#........#
.#...#..#.
#.........
..........
#....#....
##.......#
.....#..##
#..#.....#

Tile 3049:
####...###
#.#......#
......#...
..#..#..#.
#.#.##..#.
.####..##.
...#.....#
......#..#
##...#.#..
...###.#.#

Tile 3121:
.#####.#.#
##.......#
#........#
.........#
.#........
#......#..
#....##...
......#...
.....#...#
#####..###

Tile 2857:
..#..#.##.
..#..#....
...#.#....
#...#.#.##
#...#.#..#
...#......
....#.#...
.#...###.#
.#..##....
....##.#.#

Tile 1399:
#....##..#
#..#.....#
#.....##.#
........#.
#.....#.##
.#.....#.#
#......#..
.#..#...#.
#...#..#..
##...###.#

Tile 3371:
.#.##...##
..........
..#.......
#..#......
#....#...#
##........
##.#......
...###...#
...#......
####..#..#

Tile 2011:
#######...
..#..#..##
........#.
#...#.....
#.........
......#...
..#..#....
.........#
#...##..##
.#..###.#.

Tile 1321:
#..#....#.
.#...#...#
#..#......
.##.......
.#.#..##.#
..........
....#.....
#.##.....#
....####..
.#####...#

Tile 2341:
.#.#...#..
###...#...
#.#.#..#.#
#.##.###.#
#......##.
..#.#.#..#
#...#..##.
#.#.....#.
#....#.#..
#####.####

Tile 2029:
.##.####..
#.........
.#...##.#.
....#....#
##.##....#
#...#....#
#....#..#.
#.......#.
#........#
.####.#..#

Tile 1847:
####.####.
###.......
#.........
.........#
.#.#......
#.##...#..
#..#......
#.#.....#.
.....#...#
.....#.#..

Tile 2833:
..#.......
.......#.#
.......#.#
#.......##
#..#...###
.##......#
.......###
#....#.#..
.......#..
###.#.....

Tile 3769:
..#..#..##
....#.....
.#...#...#
..#..#....
...##.....
#.##......
.##...##.#
#.#.#.....
.#..##....
##..##.###

Tile 1621:
####..#...
#..#.#...#
......#..#
##...#....
#..##.....
..#..#...#
..#.##.###
#.#...#..#
#.#.......
##.#.##.#.

Tile 3557:
..#.##..#.
.....##...
#.....##..
#.#.#.#...
#....#....
#...#..#..
##.#.....#
......#.#.
#.........
.#..##....

Tile 2539:
##.##.##..
#....#.#..
#..#....#.
#......#.#
#...##...#
........##
..........
.....#...#
..#.##....
..#...#...

Tile 2309:
..#.##....
#....#...#
#..#......
..#.......
#...##....
#........#
......#..#
.#.#......
#..#.....#
....#.##..

Tile 1613:
.#....####
#.#...#.##
#.........
#.........
..........
#..#.....#
.........#
#......#.#
........#.
#.##...##.

Tile 2791:
#.###..##.
.#........
#......#..
.......###
.##.......
##........
........#.
##........
.....#.#.#
......####

Tile 2957:
#.###.#...
#..#.....#
....#....#
#........#
....#.....
##.#...###
......#..#
#.#......#
#......#..
.#..#.#...

Tile 2803:
###....##.
..#.#..#..
......#...
....#.....
#......##.
##......##
#....#.#.#
..#....###
#..##.#..#
..####..##

Tile 2917:
.#.##..###
...#......
#.#......#
#.....#..#
######.#.#
..........
......#...
.....#....
##.###....
##.#...##.

Tile 1487:
..#...#.#.
#........#
.#.#......
#.........
####.#..#.
#..#.#...#
#.....##.#
..#....###
.........#
##.....#.#

Tile 3389:
#.##..#.#.
........#.
..........
#......#.#
.#.#......
#....#.#..
##....#...
#.#...#...
#......#..
#..##....#

Tile 3229:
##...##...
##.......#
#.##.....#
..#..#...#
....#.##.#
....#..#..
#.....#...
##.##.#.##
.#........
.#.##.###.

Tile 1123:
#..#.###..
#........#
#.#...#..#
##....#.#.
..........
.#........
#..#.##...
.......#.#
###.##..#.
.#..#.#.#.

Tile 1279:
..##..#..#
........##
#.#......#
#..#.....#
...#......
..#.....##
#....#....
#...#....#
###....#.#
###..#..##

Tile 3917:
.#..##.#.#
........##
..#..#..#.
#..##...##
#.........
......#...
#.....#..#
#.#......#
...#..##.#
##.###.##.

Tile 2741:
##.#.#####
..##......
...##..#.#
#..#.#....
##..#.....
.#.....#..
##....#..#
##.....#.#
#........#
.#.####.##

Tile 1913:
.##...##..
##.....#.#
.#..#..###
#........#
......###.
#....##..#
....#....#
###...#..#
##.......#
##.#.###..

Tile 1019:
...##.#..#
#..#.....#
..........
..........
##.####..#
#......###
#......###
#..#.....#
#.......##
.#.######.

Tile 1223:
#.##....#.
..#...#..#
#........#
.........#
........#.
...#......
..##..#...
.#...##.#.
..#.#.#..#
.#.....###

Tile 1481:
#.#.#####.
.......#..
.#..#..#.#
#.#..##..#
#.....#...
#.#...#...
....#....#
..#.......
....#.....
##..#...##

Tile 3251:
#.#...###.
...##....#
##....#...
#.....##.#
#.......##
..###...#.
##..#..#.#
#.#....#..
#....##..#
#.##.....#

Tile 3863:
.#.##.....
.##...#.#.
#.......##
#.#.......
.#..#.#.#.
...###...#
#...#.#...
......#...
......#..#
.#..##.#.#

Tile 3109:
..##.###..
#..#.#....
#...#...#.
...####...
....#.....
#....#..#.
.#...#...#
#..#..#...
...#..##.#
..##.#....

Tile 3023:
#...#...#.
...#.....#
.......#.#
#..##.....
.#.......#
.......#.#
..#...##.#
......#...
#.......#.
#.##..####

Tile 3391:
#.###...##
.#.#.....#
###......#
#.###.....
#.#......#
#...#.#..#
####.##...
.#..###..#
.#........
#.#.#.##..

Tile 1811:
.......##.
..#...##.#
.###.....#
##.#.#....
####......
#.#.......
#........#
#...#.....
..#.#....#
..#.#....#

Tile 2819:
.#.#######
#.....#...
.#..#....#
.........#
#...#.##.#
#..#...#..
###..#.###
..#..###..
.......#..
##.##....#

Tile 3209:
.##..#.#.#
.........#
#.........
#.........
.#....#..#
#.....#..#
......#..#
##.#.....#
#....#.#.#
#.##..###.

Tile 3989:
#.#.#.#.#.
...#..#.#.
#.........
....#.#..#
.##.#.#..#
.....##.#.
#........#
#......###
#.#..#....
.##.#..##.

Tile 1831:
.##.#..#..
...#......
..........
#..#..#...
.#.#..#...
#...#..#.#
...##.....
..###.....
...#.#...#
##.#.##...

Tile 1801:
#.#...#.#.
..........
...#......
....#....#
#.....#...
.........#
##.#....#.
#.........
##.......#
.#.#....#.

Tile 2143:
.#.#...#.#
#.#.......
...###...#
#.........
#..#......
.........#
#.#.#.....
....#..#.#
..#.#.....
#.#.##....

Tile 3517:
.###.#...#
#.#.#.....
.#.......#
.........#
.........#
#.....##..
..........
#......#.#
#........#
..#.#..##.

Tile 2287:
#####...#.
......#...
##........
....#....#
.#........
.##...###.
.##.....#.
..........
........##
.#..#..#..

Tile 3221:
.###.##.##
##........
.....##..#
#.......#.
........#.
##........
....#.....
....#.....
##......#.
##.#.#.###

Tile 3203:
###.##...#
.##.....#.
#.........
#.#.......
...#......
#.#..#.#..
#.........
#......#.#
.........#
####.#....

Tile 2707:
.#.....###
.....#.#..
##..#.....
##....##.#
....#..###
.#..#.#...
#.....#...
#......#..
.#.#...##.
#.##.##...

Tile 3701:
.#.##.....
##....#..#
......#...
.......#..
#...#...##
.....#....
.#.#...#.#
#.#......#
###...#...
...#...#.#

Tile 3709:
..#..#....
.........#
#.#.......
#.#..#...#
##..#..#..
..........
#..#....#.
.....#....
##........
.###.....#

Tile 2113:
..#..##.#.
#.#..#..#.
###......#
#..##.##..
...#.....#
......#..#
#.....#.##
...#...#..
.#..#....#
#..#.....#

Tile 1091:
#..#...#..
#.....#..#
...#......
..#...#..#
.####..#..
....#...##
..##.....#
#....#...#
....##....
#.##....#.

Tile 3671:
##.##...##
#.#.......
.........#
.#.......#
..#..#..##
.........#
#.....#.##
#.#.......
#......#.#
#.#..#....

Tile 3457:
#..#.###..
#.....#..#
.....#...#
...#....#.
..#.......
#....#...#
#.........
..#.#.....
...##.#..#
.....#..##

Tile 1229:
####.###.#
.......#..
##.....#..
...#.....#
#...#....#
#.#.#....#
#..#...#.#
#.#....#.#
....#..###
..#.#.###.

Tile 1901:
.#.......#
..#.#....#
..#.......
##.#...###
.#.....#..
....##....
#..#......
#.#.......
#.#.......
.#....#.#.

Tile 2207:
...#..#..#
#..#.....#
...#......
.........#
.....#..#.
#..#..#...
#...#.#.#.
.....#.#..
#...##....
.##.#...#.

Tile 2531:
#.....#.##
...###....
#........#
#......#..
#....##..#
#.........
##........
.#........
.........#
.##....#.#

Tile 1129:
##..###.#.
.#.##.....
#.#.......
#.#.#.....
#...#..#.#
.#...##..#
#...##..##
....#.....
.........#
###.##....

Tile 2477:
.##...#...
##......##
...#.....#
#.........
#........#
........#.
#...#.#..#
#.##..#...
.......#..
....#####.

Tile 1879:
...#...#.#
.##...##..
..#..#.##.
....#...#.
#......#.#
#...##....
.#.##.....
..#.#.#...
#...#....#
##...#..##

Tile 3329:
.#..#.#.#.
##....#...
...#......
##......##
..........
#..#..#..#
.#...#.#..
#......#..
#.....#.##
#.##...#.#

Tile 3083:
####.#..#.
#.#.#..#..
#.#.#..#..
#.#.#.#...
......#...
##....#...
......#...
.......#.#
..#..###.#
..#######.

Tile 2441:
#......#.#
..#.##....
.##....#.#
..#.#..#..
.#.#...#.#
...#......
#........#
..#......#
.........#
.#.####.##

Tile 3877:
.##.#.#...
.#..#.#..#
...#.###.#
......#..#
.#...#....
##.#...#.#
.##.....##
#........#
##.#......
#..#.##.#.

Tile 2437:
#.##...##.
..#.......
#..#..#..#
.......#..
#.##.....#
..........
.........#
....#....#
.#......#.
.#..#.##.#

Tile 3613:
###.......
#.##......
###.....#.
#.##......
#.....#...
....#....#
##.......#
#.#..#....
#..#.....#
#..#.#.#.#

Tile 3761:
#.##.#.###
#..#.....#
##.#..#.##
##......##
##....#..#
#.#.#..#..
.........#
#.....#..#
#.#.......
...#####.#

Tile 3499:
.###.#.###
......#..#
#........#
..........
#.........
...##..#.#
#....#...#
....#.#...
#...#...#.
#.##.##..#

Tile 3511:
.........#
.#.......#
.#.....#..
.......#..
.#........
#.#.....##
..#......#
##........
#........#
.#..#.##..

Tile 1543:
###....#..
...#.##...
#......#.#
.....#.#..
#.....#..#
#...#.#..#
##....#...
......##.#
......####
.#.#.#..##

Tile 2897:
###..##.##
....##....
#..#......
.......#.#
.##.#.#..#
#......#.#
.........#
#.........
.....###..
##...#....

Tile 1607:
..###.#.##
#........#
.#.#...#..
..........
#........#
###.....#.
.##..##..#
###.......
#..#.#...#
###...##.#

Tile 3313:
.####.#.#.
.##......#
#.........
....#.....
#..#..####
#.....#...
#..#..##..
#.#..##.##
###.#..###
##.....#..

Tile 1433:
#.#.#.##.#
#..#....##
#.#......#
#.....#..#
#....#...#
#.........
.........#
...##.##.#
..........
#...#...#.

Tile 3947:
.##...##..
#...#..#.#
.......#..
#.......#.
.#..#....#
.##......#
####.#..#.
##.##..#.#
#.#..#....
###...##..

Tile 2879:
.#.###....
##..#..#.#
##...##...
.....#....
.........#
..#.......
##.......#
.#...#...#
...##.....
##...#....

Tile 2129:
##..#..#.#
....#.#.##
.#.......#
#...#...#.
......#..#
#..#....##
........##
.#....###.
#.....####
.....#.#..

Tile 3089:
..####.###
..........
.....#.#.#
#..###..#.
#.#.......
.....#....
##.#.#....
#....##..#
##.......#
#...##.#..

Tile 2459:
###.#..#.#
.#.......#
.#........
#.#..#....
....##...#
#.#....#..
#....####.
..###..#.#
.........#
.#########

Tile 3119:
#..#.##..#
#........#
..#.#....#
#.####...#
###.......
....#....#
........##
..........
##....#.##
#.#.#.##..

Tile 2393:
...#..#..#
....#.....
#......##.
.#.#.#.###
.........#
#.........
#.......##
##.......#
#..##...##
##..#..#.#

Tile 1193:
.##...###.
#.....##..
#.....#...
#.........
#...###.##
.#..#..#.#
..#.......
#..#....##
......#..#
#..#.#.###

Tile 2969:
...#...##.
.........#
..#....###
####...#.#
#........#
#......#.#
#..##....#
#...##....
#..##.....
.#.#.#.#.#

Tile 1453:
#..#.#..#.
......#...
##.###....
#....#...#
...#.#.##.
.....#....
#......#..
.##.....##
.#...#...#
.##.#..###

Tile 2543:
#....#....
#...#.#...
#.......#.
#........#
....#.##.#
..##...#..
##.......#
#..#..#...
.........#
#...#..#..

Tile 3739:
##.####...
#.#..#....
.........#
.......#..
.#....##..
#.....#...
#..#......
#........#
#...#.....
#.....#.##

Tile 2699:
#.#.#.#...
...#.....#
#........#
#..#...#.#
#.#.#.####
.#..#.##..
#....##...
##...##..#
..........
#####.#..#

Tile 2609:
.#.###.##.
...#....#.
..........
.###...#..
........##
#......#..
.###.##..#
#.#....#.#
#.#.#.....
.#.###..##

Tile 1949:
#....#.#..
#.#.......
##.......#
##...#..#.
.....###.#
......#...
.........#
.........#
#.###..#.#
..##.##.#.

Tile 3697:
####..##..
#.#......#
#.......##
#.....#...
###.#..#..
##.####..#
.#.......#
...##.....
#.........
..##.###.#

Tile 3019:
########..
.......##.
........##
#....##.#.
..........
....#....#
#.#......#
##...#....
#.........
####..#...

Tile 1277:
..##.#####
#.........
.........#
..#.#....#
##.......#
..........
##.#.#..#.
#...#....#
##.....#..
.#.....##.

Tile 2801:
#####..##.
#...##...#
#.........
..#...##..
#.........
.##...#...
....##....
...##..#..
.##.#.#..#
#.##....##

Tile 2903:
#######.#.
.##.#....#
#.#....#.#
#..#.....#
...##...##
#..#.....#
.#.##....#
..#..#....
..#....###
....#....#

Tile 3929:
..#..#....
##........
#..#......
##..#.....
.........#
.....#....
..#..#...#
...#......
#.......##
####.###..

Tile 1039:
###.#.####
#....#...#
..#.###...
#..#..#...
###....###
##.#.#...#
..........
#...#####.
####.#..#.
##.....#..

Tile 2549:
...##.#.#.
#........#
#.........
.......#.#
#...#.....
#.#...#..#
#.....#...
.......#..
#.........
..#...####

Tile 3673:
###...#...
.##..#....
..#...#.##
.#......##
.........#
#.....#...
##.#..#...
#........#
#........#
.......###

Tile 3911:
########.#
#.........
####.....#
.........#
#.........
##.##...#.
#......###
......#..#
##.....#..
..#..#..#.

Tile 1163:
#..##.#.#.
........##
#...#...##
#....#...#
..........
..#......#
.....#...#
......####
......#...
#.#..#.#.#

Tile 2293:
..#.#..#..
...###...#
.....#....
##.......#
#......#..
#......#.#
#...#....#
#.#.#.....
....#.....
..####.#.#

Tile 3541:
#..#...##.
..##...#.#
##....##.#
#......#.#
##....#...
..........
#...#.#...
##.##..#.#
#.##.....#
......###.

Tile 3767:
#.#..#####
#......#.#
.......#.#
..##..#..#
.........#
#.#.##...#
#...#....#
#.....###.
#........#
#.##.#####

Tile 2131:
###...#.#.
.#.....#.#
##.......#
#...#...##
#...#...##
...#..#...
#.......##
#..#.....#
.........#
...#......

Tile 3923:
###...#.#.
#....#...#
###...#...
#.#.#.....
#..##....#
...#.#..##
..........
#.#......#
##.#...#.#
#..#.##..#

Tile 2789:
.....##...
.#.....#.#
.#..#..#..
....#...##
..#.#.....
.#.#......
#....#....
#.........
#.#......#
#.#.######

Tile 3607:
####...#.#
..#.#.#.#.
....##.#..
#........#
.........#
.###....#.
#.........
#......#..
.#.#..#..#
###.##.##.

Tile 1187:
..#....###
##........
.....#..#.
##.#.#....
#.#.......
..#...#..#
#..#..#...
#.#..#...#
##.......#
###...##.#

Tile 1933:
.#.##..###
...#.....#
#........#
..#..#....
#...#.....
.#.#.#....
###.......
#.....#...
.........#
#...#...##

Tile 1571:
...#.#.#.#
#.#......#
#....#...#
#.#...#..#
..#....#..
.........#
..........
..........
....#....#
..#..#.#..

Tile 1451:
.#.......#
#.......#.
##.....#..
....#.#..#
##......##
#..#......
#........#
.#..#...##
##.#..#..#
#.########

Tile 1051:
##.#.##...
...#..#..#
..##.#...#
....#....#
##........
#.........
...#.....#
#.........
..###.....
.##.######

Tile 3637:
.#........
..........
#...###...
..........
..#..#...#
##.....#..
.#...#...#
#...#.#...
...#.##.##
######.#..

Tile 3163:
####.##.##
#.....#..#
.........#
##.......#
........#.
........#.
..#....#..
.....#...#
#......##.
#.........

Tile 1409:
..##.####.
#....#...#
#.....#..#
##.#.....#
...#.#...#
#..#..#..#
......#..#
.#.###....
#.#..##..#
.##.###..#

Tile 1069:
...#..##..
.........#
..........
.........#
.#........
#..#.#.#.#
#........#
........##
.......#.#
####.###..

Tile 2339:
.#######..
...#...#.#
.......#..
......#...
.#.#.#....
#.#......#
#.#.#....#
#..##....#
.........#
##..#.###.

Tile 3343:
.##..#...#
#...#.#..#
..#.......
.......#.#
#.....#...
.#..#.##..
.#........
#..#.#....
#.......##
#.#..#...#

Tile 1103:
.###.#.###
.........#
#...#.##.#
.......#.#
#.....#...
#.........
#...#..#..
.......#.#
#..#.#...#
#...###.#.

Tile 3583:
#.##...#.#
##.#..#..#
....#.....
......##.#
##.....#.#
.#........
##....#...
.....#...#
#........#
#####..##.

Tile 1361:
##..#.##.#
......#...
....#....#
##.......#
.....#....
.#...#.#..
##.......#
..##......
#....#.#..
#.#.#.####

Tile 1597:
##.#.#.##.
.#.#.....#
.#...#.#.#
#.#....#.#
.......##.
..#..#....
...#....##
#.......#.
.#.#......
##.#..###.

Tile 2963:
.#.#####.#
##.....##.
#.......#.
#.....#..#
#..#....##
..#......#
.##...#..#
..##.....#
#.........
.##......#

Tile 2039:
#######...
##........
#....#.#.#
#.#...#..#
#..#..#...
...#..#..#
####..####
.#.....#.#
#........#
#..###..#.

Tile 1181:
#..###...#
...#.#...#
###..#.#..
..#.#..#..
......##..
#.#..#.##.
...#.###..
.#..#.#..#
.........#
.###.#..##

Tile 1697:
#.#.#..##.
#.###.....
#...#.#.##
....###...
#...#.....
..##.....#
.....#....
#........#
...##.....
##.###.###

Tile 3001:
###...###.
#........#
#...#....#
..#..#....
#.#...###.
#..#....##
#.#.#....#
#...#....#
....#...#.
.##..#.##.

Tile 1319:
.#.#####..
.......#.#
..##....#.
#........#
#.##.....#
#.#...#...
........##
.....#...#
######...#
#.##......

Tile 3307:
#..#.#.###
..........
##.##.....
#.#.#.....
....#.....
.........#
##.....#.#
..#.......
#.....#..#
.###.##..#

"""
lines = lines.strip()
tiles = [line.split("\n") for line in lines.split("\n\n")]


def isCornerTile(tile, tiles):
    matchCount = 0
    for targetTile in tiles:
        if tile == targetTile:
            continue
        for edge in tile["edges"]:
            for targetEdge in targetTile["edges"]:
                if edge == targetEdge or edge == targetEdge[::-1]:
                    matchCount += 1
    print(tile["tileId"], matchCount)
    return matchCount < 3


def getCornerIds(tiles):
    cornerIds = []
    for tile in tiles:
        if isCornerTile(tile, tiles):
            cornerIds.append(int(tile["tileId"]))
    return cornerIds


# @timer
def part1(tiles):
    data = []
    for tile in tiles:
        tileId = tile[0][5:9]
        left = "".join(["".join(line[0]) for line in tile[1:]])
        right = "".join(["".join(line[9]) for line in tile[1:]])
        bottom = tile[len(tile) - 1]
        top = tile[1]
        data.append({"tileId": tileId, "edges": [top, bottom, left, right]})

    cornerIds = getCornerIds(data)
    return ft.reduce(lambda x, y: x * y, cornerIds)


# @timer
def part2(tiles):
    return


print(f"Answer 1: {part1(tiles)}")
print(f"Answer 2: {part2(tiles)}")
